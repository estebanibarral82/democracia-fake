(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const l={mentira:[{year:"1973",title:"Plan Z: la UP planea masacrar a 5 000 opositores",description:"La prensa oficial reproduce un supuesto documento militar que atribuye al gobierno de Allende un plan de autogolpe para el 19 de septiembre, con listas de enemigos y croquis de cuarteles intervenidos.",cta:"VER MENTIRA"},{year:"1975",title:"Exterminados como ratones: el MIR se depura con 119 muertos",description:"El diario La Segunda afirma que los militantes desaparecidos murieron en peleas internas en el extranjero, basándose en revistas que nadie ha logrado encontrar en los países mencionados.",cta:"VER MENTIRA"},{year:"2017",title:"Chats de WhatsApp prueban red terrorista mapuche",description:"Capturas de pantalla presentadas por Carabineros se emiten en noticieros como prueba irrefutable de coordinación de ataques. Ocho comuneros son detenidos en horario estelar.",cta:"VER MENTIRA"},{year:"2018",title:"Comunero armado cae en enfrentamiento con GOPE",description:"La versión oficial acusa a Camilo Catrillanca de participar en un robo y disparar contra el GOPE. Se afirma que no hay registro audiovisual del operativo.",cta:"VER MENTIRA"},{year:"2020",title:"Detenido con bidón de bencina es el autor de incendio en Metro Baquedano",description:"Imágenes de un joven reducido por Carabineros se viralizan como prueba del ataque. Medios lo presentan como un manifestante violento sorprendido con acelerantes.",cta:"VER MENTIRA"},{year:"2021",title:"Fans de K-pop organizan atentados y saqueos durante protestas",description:"En redes sociales y noticieros se acusa a comunidades K-pop de usar sus plataformas para coordinar hechos de violencia durante el estallido social.",cta:"VER MENTIRA"}],verdad:[{year:"1973",title:"Militares difunden plan sin respaldo documental ni fuentes verificables",description:"La Junta informa de un plan atribuido a la UP, pero no exhibe originales ni autores. Partidos opositores y medios extranjeros no encuentran pruebas que sustenten su existencia.",cta:"VER VERDAD"},{year:"1975",title:"Revistas extranjeras citadas no existen; lista corresponde a detenidos en Chile",description:"Investigaciones periodísticas demuestran que las publicaciones no tienen registro. Organismos de derechos humanos vinculan a los 119 nombres con centros de detención chilenos.",cta:"VER VERDAD"},{year:"2017",title:"Mensajes sin peritaje independiente ni validación técnica",description:"Expertos exigen claves hash y metadatos para validar los chats. La fiscalía advierte que los teléfonos fueron manipulados sin supervisión judicial ni acceso de la defensa.",cta:"VER VERDAD"},{year:"2018",title:"Videos ocultos muestran a Catrillanca desarmado; disparos provienen de Carabineros",description:"El estudiante que lo acompañaba desmiente la versión. Las cámaras corporales de la patrulla registraron los hechos, pero los archivos fueron ocultados o eliminados.",cta:"VER VERDAD"},{year:"2020",title:"Joven detenido no estaba en Metro; pruebas no vinculan presencia ni incendio",description:"Reportes confirman que fue arrestado en superficie y no se le hallaron materiales inflamables. Fiscalía no logra acreditar su participación en el siniestro.",cta:"VER VERDAD"},{year:"2021",title:"No hay evidencia de participación violenta; fans promovieron causas solidarias",description:"Análisis de redes descarta llamados a la violencia. Grupos de fans se enfocaron en campañas de ayuda y difusión de derechos humanos, sin vínculo con disturbios.",cta:"VER VERDAD"}]};class m{constructor(){this.currentMode="mentira",this.individualModes={},this.init()}init(){this.setupEventListeners(),this.renderTimeline(),this.initScrollAnimations(),this.updateLogo(),this.initSwitchLabels(),this.initScrollProgress()}initSwitchLabels(){const e=document.querySelector(".switch-label.left"),t=document.querySelector(".switch-label.right");e&&t&&(e.classList.add("active"),t.classList.remove("active"))}setupEventListeners(){const e=document.getElementById("hamburgerToggle"),t=document.getElementById("menuOverlay");e?.addEventListener("click",()=>{e.classList.toggle("active"),t.classList.toggle("active")}),document.querySelectorAll(".menu-items a").forEach(a=>{a.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active")})});const i=document.getElementById("switchInput");i?.addEventListener("change",a=>{console.log("Switch changed:",a.target.checked),this.toggleMode(a.target.checked)}),document.querySelector(".switch")?.addEventListener("click",a=>{a.target!==i&&(i.checked=!i.checked,this.toggleMode(i.checked))}),document.getElementById("firmaButton")?.addEventListener("click",()=>{alert("Redirigiendo a formulario de suscripción...")}),document.addEventListener("click",a=>{if(a.target.classList.contains("timeline-cta")){a.preventDefault();const d=a.target.closest(".timeline-item").querySelector(".timeline-year").textContent;this.openVideoModal(d)}});const r=document.getElementById("videoModal");document.getElementById("videoModalClose")?.addEventListener("click",()=>{this.closeVideoModal()}),r?.addEventListener("click",a=>{a.target===r&&this.closeVideoModal()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&this.closeVideoModal()})}toggleMode(e){console.log("Toggling mode to:",e?"verdad":"mentira"),this.currentMode=e?"verdad":"mentira",document.body.classList.toggle("verdad-mode",e);const t=document.querySelector(".switch-label.left"),o=document.querySelector(".switch-label.right");t&&o&&(t.classList.toggle("active",!e),o.classList.toggle("active",e)),this.updateLogo(),this.renderTimeline()}updateLogo(){const e=document.getElementById("mainLogo");if(e){const t=this.currentMode==="mentira"?"header-mentira.png":"header-verdad.png";e.src=t,e.alt=`Democracia Fake - ${this.currentMode==="mentira"?"Montaje":"Verdad"}`}}renderTimeline(){const e=document.getElementById("timeline");if(!e)return;e.innerHTML="",l.mentira.forEach((o,i)=>{const n=document.createElement("div");n.className="timeline-item",n.setAttribute("data-year",o.year);const s=this.individualModes[o.year]||this.currentMode,r=l[s][i];n.innerHTML=`
        <div class="timeline-circle"></div>
        <div class="timeline-year">${o.year}</div>
        <div class="timeline-content">
          <div class="timeline-switch-container">
            <span class="timeline-switch-label left ${s==="mentira"?"active":""}">MENTIRA</span>
            <label class="timeline-switch">
              <input type="checkbox" ${s==="verdad"?"checked":""} data-year="${o.year}">
              <span class="timeline-slider"></span>
            </label>
            <span class="timeline-switch-label right ${s==="verdad"?"active":""}">VERDAD</span>
          </div>
          <h3>${r.title}</h3>
          <p>${r.description}</p>
          <button class="timeline-cta" data-year="${o.year}">${r.cta}</button>
        </div>
      `,e.appendChild(n)}),this.setupTimelineSwitches(),setTimeout(()=>{this.initScrollAnimations()},100)}setupTimelineSwitches(){document.querySelectorAll(".timeline-switch input").forEach(t=>{t.addEventListener("change",o=>{const i=o.target.getAttribute("data-year"),n=o.target.checked;this.toggleIndividualMode(i,n)})})}toggleIndividualMode(e,t){this.individualModes[e]=t?"verdad":"mentira";const o=document.querySelector(`[data-year="${e}"]`);if(!o)return;const i=l.mentira.findIndex(d=>d.year===e);if(i===-1)return;const n=l[t?"verdad":"mentira"][i],s=o.querySelector(".timeline-content"),r=s.querySelector(".timeline-switch-container"),u=r.querySelector(".timeline-switch-label.left"),a=r.querySelector(".timeline-switch-label.right");u.classList.toggle("active",!t),a.classList.toggle("active",t),s.querySelector("h3").textContent=n.title,s.querySelector("p").textContent=n.description,s.querySelector(".timeline-cta").textContent=n.cta,console.log(`Timeline item ${e} switched to: ${t?"verdad":"mentira"}`)}openVideoModal(e){const t=document.getElementById("videoModal"),o=document.getElementById("videoIframe"),n={1973:"https://www.youtube.com/embed/dQw4w9WgXcQ",1975:"https://www.youtube.com/embed/dQw4w9WgXcQ",2017:"https://www.youtube.com/embed/dQw4w9WgXcQ",2018:"https://www.youtube.com/embed/dQw4w9WgXcQ",2020:"https://www.youtube.com/embed/dQw4w9WgXcQ",2021:"https://www.youtube.com/embed/dQw4w9WgXcQ"}[e]||"https://www.youtube.com/embed/dQw4w9WgXcQ";o&&(o.src=n),t&&(t.classList.add("active"),document.body.style.overflow="hidden")}closeVideoModal(){const e=document.getElementById("videoModal"),t=document.getElementById("videoIframe");e&&(e.classList.remove("active"),document.body.style.overflow=""),t&&(t.src="")}initScrollProgress(){const e=document.querySelector(".timeline");window.addEventListener("scroll",()=>{if(!e)return;const t=e.getBoundingClientRect(),o=window.innerHeight,i=e.offsetHeight,n=Math.max(0,Math.min(100,(o-t.top)/(i+o)*100));e.style.setProperty("--scroll-progress",`${n}%`),e.classList.toggle("scrolling",n>0),this.updateTimelineCircles()})}updateTimelineCircles(){const e=document.querySelectorAll(".timeline-item"),t=window.innerHeight;e.forEach(o=>{const i=o.querySelector(".timeline-circle"),n=o.getBoundingClientRect();n.top<t*.7&&n.bottom>t*.3?i.classList.add("active"):i.classList.remove("active")})}initScrollAnimations(){const e=document.querySelectorAll(".timeline-item"),t={threshold:.3,rootMargin:"0px 0px -100px 0px"},o=new IntersectionObserver(i=>{i.forEach(n=>{n.isIntersecting&&n.target.classList.add("animate")})},t);e.forEach(i=>{i.classList.remove("animate"),o.observe(i)})}initParallax(){window.addEventListener("scroll",()=>{const e=window.pageYOffset,t=document.querySelector(".timeline-container");if(t){const o=t.getBoundingClientRect();if(o.top<window.innerHeight&&o.bottom>0){const i=e*.1;t.style.transform=`translateY(${i}px)`}}})}}document.addEventListener("DOMContentLoaded",()=>{new m});document.addEventListener("click",c=>{if(c.target.tagName==="A"&&c.target.getAttribute("href")?.startsWith("#")){c.preventDefault();const e=c.target.getAttribute("href").substring(1),t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})}});
