(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();const d={mentira:[{year:"1973",title:"Plan Z: la UP planea masacrar a 5 000 opositores",description:"La prensa oficial reproduce un supuesto documento militar que atribuye al gobierno de Allende un plan de autogolpe para el 19 de septiembre, con listas de enemigos y croquis de cuarteles intervenidos.",cta:"VER MENTIRA"},{year:"1975",title:"Exterminados como ratones: el MIR se depura con 119 muertos",description:"El diario La Segunda afirma que los militantes desaparecidos murieron en peleas internas en el extranjero, basándose en revistas que nadie ha logrado encontrar en los países mencionados.",cta:"VER MENTIRA"},{year:"2017",title:"Chats de WhatsApp prueban red terrorista mapuche",description:"Capturas de pantalla presentadas por Carabineros se emiten en noticieros como prueba irrefutable de coordinación de ataques. Ocho comuneros son detenidos en horario estelar.",cta:"VER MENTIRA"},{year:"2018",title:"Comunero armado cae en enfrentamiento con GOPE",description:"La versión oficial acusa a Camilo Catrillanca de participar en un robo y disparar contra el GOPE. Se afirma que no hay registro audiovisual del operativo.",cta:"VER MENTIRA"},{year:"2020",title:"Detenido con bidón de bencina es el autor de incendio en Metro Baquedano",description:"Imágenes de un joven reducido por Carabineros se viralizan como prueba del ataque. Medios lo presentan como un manifestante violento sorprendido con acelerantes.",cta:"VER MENTIRA"},{year:"2021",title:"Fans de K-pop organizan atentados y saqueos durante protestas",description:"En redes sociales y noticieros se acusa a comunidades K-pop de usar sus plataformas para coordinar hechos de violencia durante el estallido social.",cta:"VER MENTIRA"}],verdad:[{year:"1973",title:"Militares difunden plan sin respaldo documental ni fuentes verificables",description:"La Junta informa de un plan atribuido a la UP, pero no exhibe originales ni autores. Partidos opositores y medios extranjeros no encuentran pruebas que sustenten su existencia.",cta:"VER VERDAD"},{year:"1975",title:"Revistas extranjeras citadas no existen; lista corresponde a detenidos en Chile",description:"Investigaciones periodísticas demuestran que las publicaciones no tienen registro. Organismos de derechos humanos vinculan a los 119 nombres con centros de detención chilenos.",cta:"VER VERDAD"},{year:"2017",title:"Mensajes sin peritaje independiente ni validación técnica",description:"Expertos exigen claves hash y metadatos para validar los chats. La fiscalía advierte que los teléfonos fueron manipulados sin supervisión judicial ni acceso de la defensa.",cta:"VER VERDAD"},{year:"2018",title:"Videos ocultos muestran a Catrillanca desarmado; disparos provienen de Carabineros",description:"El estudiante que lo acompañaba desmiente la versión. Las cámaras corporales de la patrulla registraron los hechos, pero los archivos fueron ocultados o eliminados.",cta:"VER VERDAD"},{year:"2020",title:"Joven detenido no estaba en Metro; pruebas no vinculan presencia ni incendio",description:"Reportes confirman que fue arrestado en superficie y no se le hallaron materiales inflamables. Fiscalía no logra acreditar su participación en el siniestro.",cta:"VER VERDAD"},{year:"2021",title:"No hay evidencia de participación violenta; fans promovieron causas solidarias",description:"Análisis de redes descarta llamados a la violencia. Grupos de fans se enfocaron en campañas de ayuda y difusión de derechos humanos, sin vínculo con disturbios.",cta:"VER VERDAD"}]};class u{constructor(){this.currentMode="mentira",this.init()}init(){this.setupEventListeners(),this.renderTimeline(),this.initScrollAnimations(),this.updateLogo(),this.initSwitchLabels(),this.initScrollProgress()}initSwitchLabels(){const e=document.querySelector(".switch-label.left"),i=document.querySelector(".switch-label.right");e&&i&&(e.classList.add("active"),i.classList.remove("active"))}setupEventListeners(){const e=document.getElementById("hamburgerToggle"),i=document.getElementById("menuOverlay");e?.addEventListener("click",()=>{e.classList.toggle("active"),i.classList.toggle("active")}),document.querySelectorAll(".menu-items a").forEach(a=>{a.addEventListener("click",()=>{e.classList.remove("active"),i.classList.remove("active")})});const t=document.getElementById("switchInput");t?.addEventListener("change",a=>{console.log("Switch changed:",a.target.checked),this.toggleMode(a.target.checked)}),document.querySelector(".switch")?.addEventListener("click",a=>{a.target!==t&&(t.checked=!t.checked,this.toggleMode(t.checked))}),document.getElementById("firmaButton")?.addEventListener("click",()=>{alert("Redirigiendo a formulario de suscripción...")}),document.addEventListener("click",a=>{if(a.target.classList.contains("timeline-cta")){a.preventDefault();const l=a.target.closest(".timeline-item").querySelector(".timeline-year").textContent;this.openVideoModal(l)}});const c=document.getElementById("videoModal");document.getElementById("videoModalClose")?.addEventListener("click",()=>{this.closeVideoModal()}),c?.addEventListener("click",a=>{a.target===c&&this.closeVideoModal()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&this.closeVideoModal()})}toggleMode(e){console.log("Toggling mode to:",e?"verdad":"mentira"),this.currentMode=e?"verdad":"mentira",document.body.classList.toggle("verdad-mode",e);const i=document.querySelector(".switch-label.left"),n=document.querySelector(".switch-label.right");i&&n&&(i.classList.toggle("active",!e),n.classList.toggle("active",e)),this.updateLogo(),this.renderTimeline()}updateLogo(){const e=document.getElementById("mainLogo");if(e){const i=this.currentMode==="mentira"?"/header-mentira.png":"/header-verdad.png";e.src=i,e.alt=`Democracia Fake - ${this.currentMode==="mentira"?"Montaje":"Verdad"}`}}renderTimeline(){const e=document.getElementById("timeline");if(!e)return;const i=d[this.currentMode];e.innerHTML="",i.forEach((n,t)=>{const o=document.createElement("div");o.className="timeline-item",o.setAttribute("data-year",n.year),o.innerHTML=`
        <div class="timeline-circle"></div>
        <div class="timeline-year">${n.year}</div>
        <div class="timeline-content">
          <h3>${n.title}</h3>
          <p>${n.description}</p>
          <button class="timeline-cta" data-year="${n.year}">${n.cta}</button>
        </div>
      `,e.appendChild(o)}),setTimeout(()=>{this.initScrollAnimations()},100)}openVideoModal(e){const i=document.getElementById("videoModal"),n=document.getElementById("videoIframe"),o={1973:"https://www.youtube.com/embed/dQw4w9WgXcQ",1975:"https://www.youtube.com/embed/dQw4w9WgXcQ",2017:"https://www.youtube.com/embed/dQw4w9WgXcQ",2018:"https://www.youtube.com/embed/dQw4w9WgXcQ",2020:"https://www.youtube.com/embed/dQw4w9WgXcQ",2021:"https://www.youtube.com/embed/dQw4w9WgXcQ"}[e]||"https://www.youtube.com/embed/dQw4w9WgXcQ";n&&(n.src=o),i&&(i.classList.add("active"),document.body.style.overflow="hidden")}closeVideoModal(){const e=document.getElementById("videoModal"),i=document.getElementById("videoIframe");e&&(e.classList.remove("active"),document.body.style.overflow=""),i&&(i.src="")}initScrollProgress(){const e=document.querySelector(".timeline");window.addEventListener("scroll",()=>{if(!e)return;const i=e.getBoundingClientRect(),n=window.innerHeight,t=e.offsetHeight,o=Math.max(0,Math.min(100,(n-i.top)/(t+n)*100));e.style.setProperty("--scroll-progress",`${o}%`),e.classList.toggle("scrolling",o>0),this.updateTimelineCircles()})}updateTimelineCircles(){const e=document.querySelectorAll(".timeline-item"),i=window.innerHeight;e.forEach(n=>{const t=n.querySelector(".timeline-circle"),o=n.getBoundingClientRect();o.top<i*.7&&o.bottom>i*.3?t.classList.add("active"):t.classList.remove("active")})}initScrollAnimations(){const e=document.querySelectorAll(".timeline-item"),i={threshold:.3,rootMargin:"0px 0px -100px 0px"},n=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&o.target.classList.add("animate")})},i);e.forEach(t=>{t.classList.remove("animate"),n.observe(t)})}initParallax(){window.addEventListener("scroll",()=>{const e=window.pageYOffset,i=document.querySelector(".timeline-container");if(i){const n=i.getBoundingClientRect();if(n.top<window.innerHeight&&n.bottom>0){const t=e*.1;i.style.transform=`translateY(${t}px)`}}})}}document.addEventListener("DOMContentLoaded",()=>{new u});document.addEventListener("click",s=>{if(s.target.tagName==="A"&&s.target.getAttribute("href")?.startsWith("#")){s.preventDefault();const e=s.target.getAttribute("href").substring(1),i=document.getElementById(e);i&&i.scrollIntoView({behavior:"smooth",block:"start"})}});
